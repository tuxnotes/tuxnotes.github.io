---
layout: post
title: TLS证书生成流程
date: 2020-08-21
author: tux
tags: tls
---

### 1 证书生成流程之文字版

#### 1.1 证书签名请求CSR

证书申请者由私钥产生CSR，CSR除了包含公钥，还包含域名，组织等其他相关信息。

#### 1.2 CA

CA收到申请者的CSR后，根据申请者提供的执照等信息进行核对，核对没问题后，对数据(public key + infomation)进行hash计算，比如采用SHA256，生成摘要。
CA用private.key对摘要进行加密，就生成了签名。将签名与数据组合在一起生成证书。

#### 1.3 验证

客户端在tls握手时，收到server发送的CA颁发的证书，然后客户端使用CA的公钥解密server发送的证书中的签名进行解密，得到hash值。
之后client再使用指定的摘要算法对server发送的证书中的数据部分进行hash计算，又得到hash值，比较前后两次生成的hash值是否相同来进行验证。

### 2 openssl生成证书的流程
